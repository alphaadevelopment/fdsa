(self.webpackChunksshwifty_ui=self.webpackChunksshwifty_ui||[]).push([[234],{8419:(e,t,n)=>{"use strict";var r=n(2137),s=n(7757),i=n.n(s),a=n(538);const o={directives:{focus:{inserted:function(e,t){t.value&&e.focus()}}},props:{error:{type:String,default:""}},data:function(){return{submitting:!1,passphrase:"",passphraseErr:""}},watch:{error:function(e){e.length>0&&(this.submitting=!1)}},mounted:function(){},methods:{auth:function(){this.passphrase.length<=0?this.passphraseErr="Passphrase cannot be empty":this.submitting||(this.submitting=!0,this.passphraseErr="",this.$emit("auth",this.passphrase))}}};const u=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"auth"}},[n("div",{attrs:{id:"auth-frame"}},[n("div",{attrs:{id:"auth-content"}},[n("h1",[e._v("Authentication required")]),e._v(" "),n("form",{staticClass:"form1",attrs:{action:"javascript:;",method:"POST"},on:{submit:e.auth}},[n("fieldset",[n("div",{staticClass:"field",class:{error:e.passphraseErr.length>0||e.error.length>0}},[e._v("\n            Passphrase\n\n            "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.passphrase,expression:"passphrase"},{name:"focus",rawName:"v-focus",value:!0,expression:"true"}],attrs:{disabled:e.submitting,type:"password",autocomplete:"off",name:"field.field.name",placeholder:"----------",autofocus:"autofocus"},domProps:{value:e.passphrase},on:{input:function(t){t.target.composing||(e.passphrase=t.target.value)}}}),e._v(" "),e.passphraseErr.length<=0&&e.error.length<=0?n("div",{staticClass:"message"},[e._v("\n              A valid password is required in order to use this\n              "),n("a",{attrs:{href:"https://github.com/nirui/sshwifty"}},[e._v("Sshwifty")]),e._v("\n              instance\n            ")]):n("div",{staticClass:"error"},[e._v("\n              "+e._s(e.passphraseErr||e.error)+"\n            ")])]),e._v(" "),n("div",{staticClass:"field"},[n("button",{attrs:{type:"submit",disabled:e.submitting},on:{click:e.auth}},[e._v("\n              Authenticate\n            ")])])])])])])])}),[],!1,null,null,null).exports;var c=n(6610),h=n(5991);function l(e,t){var n=Math.random()*(t-e)+e,r=n-n/20,s=Math.round(n).toString(16),i=Math.round(r).toString(16);return s.length%2!=0&&(s="0"+s),i.length%2!=0&&(i="0"+i),[s,i]}var d=function(){function e(){(0,c.Z)(this,e),this.assignedColors={}}return(0,h.Z)(e,[{key:"get",value:function(){for(var e,t,n,r,s,i=0;;){var a=(n=void 0,r=void 0,s=void 0,n=l(e=34,t=51),r=l(e,t),s=l(e,t),["#"+n[0]+r[0]+s[0],"#"+n[1]+r[1]+s[1]]);if(!(this.assignedColors[a[0]]&&++i<10))return this.assignedColors[a[0]]=!0,{color:a[0],dark:a[1]}}}},{key:"forget",value:function(e){delete this.assignedColors[e]}}]),e}(),f=n(993),p=n(484),v=n(5130),w=function(){function e(t){for(var n in(0,c.Z)(this,e),this.controls={},t){var r=t[n].type();if("object"===(0,p.Z)(this.controls[r]))throw new v.Z('Control "'+r+'" already been defined');this.controls[r]=t[n]}}return(0,h.Z)(e,[{key:"get",value:function(e){if("object"!==(0,p.Z)(this.controls[e]))throw new v.Z('Control "'+e+'" was undefined');return this.controls[e]}}]),e}(),y=n(8065),m=n(379),k=n(6616),g=n(7608),b=n(18),x=(n(4808),n(8784)),Z=(n(8376),n(5237)),E=63,D=function(){function e(t,n,r){(0,c.Z)(this,e),this.addrType=t,this.addrData=n,this.addrPort=r}var t;return(0,h.Z)(e,[{key:"type",value:function(){return this.addrType}},{key:"address",value:function(){return this.addrData}},{key:"port",value:function(){return this.addrPort}},{key:"buffer",value:function(){switch(this.type()){case 0:return new Uint8Array([this.addrPort>>8,255&this.addrPort,0]);case 1:if(4!=this.addrData.length)throw new v.Z("Invalid address length");return new Uint8Array([this.addrPort>>8,255&this.addrPort,64,this.addrData[0],this.addrData[1],this.addrData[2],this.addrData[3]]);case 2:if(16!=this.addrData.length)throw new v.Z("Invalid address length");return new Uint8Array([this.addrPort>>8,255&this.addrPort,128,this.addrData[0],this.addrData[1],this.addrData[2],this.addrData[3],this.addrData[4],this.addrData[5],this.addrData[6],this.addrData[7],this.addrData[8],this.addrData[9],this.addrData[10],this.addrData[11],this.addrData[12],this.addrData[13],this.addrData[14],this.addrData[15]]);case 3:if(this.addrData.length>E)throw new v.Z("Host name cannot longer than 63");var e=new Uint8Array(this.addrData.length+3);return e[0]=this.addrPort>>8&255,e[1]=255&this.addrPort,e[2]=192,e[2]|=this.addrData.length,e.set(this.addrData,3),e;default:throw new v.Z("Unknown address type")}}}],[{key:"read",value:(t=(0,r.Z)(i().mark((function t(n){var r,s,a,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.UH(n,3);case 2:r=t.sent,s=0,a=0,o=null,s|=r[0],s<<=8,s|=r[1],a=r[2]>>6,t.t0=a,t.next=0===t.t0?13:1===t.t0?14:2===t.t0?18:3===t.t0?22:26;break;case 13:return t.abrupt("break",27);case 14:return t.next=16,x.UH(n,4);case 16:return o=t.sent,t.abrupt("break",27);case 18:return t.next=20,x.UH(n,16);case 20:return o=t.sent,t.abrupt("break",27);case 22:return t.next=24,x.UH(n,63&r[2]);case 24:return o=t.sent,t.abrupt("break",27);case 26:throw new v.Z("Unknown address type");case 27:return t.abrupt("return",new e(a,o,s));case 28:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]),e}();function A(e,t){var n=Z.xu(e,t),r=3;switch(n.type){case"IPv4":r=1;break;case"IPv6":r=2;break;case"Hostname":break;default:throw new v.Z("Invalid address type")}return{type:r,address:n.addr,port:n.port}}var S=function(){function e(t,n){for(var r in(0,c.Z)(this,e),this.events={},this.placeHolders={},t){if("function"!=typeof n[t[r]])throw new v.Z('Unknown event type for "'+t[r]+'". Expecting "function" got "'+(0,p.Z)(n[t[r]])+'" instead.');var s=t[r];0===s.indexOf("@")&&(s=s.substring(1),this.placeHolders[s]=null),this.events[s]=n[t[r]]}}return(0,h.Z)(e,[{key:"place",value:function(e,t){if(null!==this.placeHolders[e])throw new v.Z('Event type "'+e+'" cannot be appended. It maybe unregistered or already been acquired');if("function"!=typeof t)throw new v.Z('Unknown event type for "'+e+'". Expecting "function" got "'+(0,p.Z)(t)+'" instead.');delete this.placeHolders[e],this.events[e]=t}},{key:"fire",value:function(e){var t;if(!this.events[e]&&null!==this.placeHolders[e])throw new v.Z("Unknown event type: "+e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return(t=this.events)[e].apply(t,r)}}]),e}(),U=(n(947),127),C=function(){function e(t){(0,c.Z)(this,e),this.num=t}var t;return(0,h.Z)(e,[{key:"marshal",value:function(){if(this.num>16383)throw new v.Z("Integer number cannot be greater than 0x3fff");return this.num<=U?new Uint8Array([this.num&U]):new Uint8Array([this.num>>7|128,this.num&U])}},{key:"unmarshal",value:(t=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<2)){e.next=12;break}return e.next=4,x.Nm(t);case 4:if(r=e.sent,this.num|=r[0]&U,0!=(128&r[0])){e.next=8;break}return e.abrupt("return");case 8:this.num<<=7;case 9:n++,e.next=1;break;case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"value",value:function(){return this.num}}]),e}(),I=function(){function e(t){(0,c.Z)(this,e),this.str=t}var t;return(0,h.Z)(e,[{key:"data",value:function(){return this.str}},{key:"buffer",value:function(){var e=new C(this.str.length).marshal(),t=new Uint8Array(e.length+this.str.length);return t.set(e,0),t.set(this.str,e.length),t}}],[{key:"read",value:(t=(0,r.Z)(i().mark((function t(n){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new C(0),t.next=3,r.unmarshal(n);case 3:return t.t0=e,t.next=6,x.UH(n,r.value());case 6:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 8:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}]),e}();function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,g.Z)(e);if(t){var s=(0,g.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,k.Z)(this,n)}}var P=4096,H=function(){function e(t,n,r){(0,c.Z)(this,e),this.sender=t,this.config=n,this.connected=!1,this.events=new S(["initialization.failed","initialized","connect.failed","connect.succeed","connect.fingerprint","connect.credential","@stdout","@stderr","close","@completed"],r)}var t,n,s,a;return(0,h.Z)(e,[{key:"run",value:function(e){var t=new I(this.config.user).buffer(),n=new D(this.config.host.type,this.config.host.address,this.config.host.port).buffer(),r=new Uint8Array([this.config.auth]),s=new Uint8Array(t.length+n.length+1);s.set(t,0),s.set(n,t.length),s.set(r,t.length+n.length),e.send(s)}},{key:"initialize",value:function(e){e.success()?this.events.fire("initialized",e):this.events.fire("initialization.failed",e)}},{key:"tick",value:function(e,t){switch(e.marker()){case 3:if(!this.connected)return this.connected=!0,this.events.fire("connect.succeed",t,this);break;case 2:if(!this.connected)return this.events.fire("connect.failed",t);break;case 4:if(!this.connected)return this.events.fire("connect.fingerprint",t,this.sender);break;case 5:if(!this.connected)return this.events.fire("connect.credential",t,this.sender);break;case 0:if(this.connected)return this.events.fire("stdout",t);break;case 1:if(this.connected)return this.events.fire("stderr",t)}throw new v.Z("Unknown stream header marker")}},{key:"sendClose",value:(a=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sender.close();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"sendData",value:(s=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.sender.sendData(0,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"sendResize",value:(n=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new DataView(new ArrayBuffer(4))).setUint16(0,t),r.setUint16(2,n),e.abrupt("return",this.sender.send(1,new Uint8Array(r.buffer)));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"close",value:(t=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendClose();case 2:return e.abrupt("return",this.events.fire("close"));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"completed",value:function(){return this.events.fire("completed")}}]),e}(),R={User:{name:"User",description:"",type:"text",value:"",example:"guest",readonly:!1,suggestions:function(e){return[]},verify:function(e){if(e.length<=0)throw new Error("Username must be specified");if(e.length>64)throw new Error("Username must not longer than 64 bytes");return"We'll login as user \""+e+'"'}},Host:{name:"Host",description:"",type:"text",value:"",example:"ssh.vaguly.com:22",readonly:!1,suggestions:function(e){return[]},verify:function(e){if(e.length<=0)throw new Error("Hostname must be specified");var t=Z.xu(e,22);if(t.addr.length<=0)throw new Error("Cannot be empty");if(t.addr.length>E)throw new Error("Can no longer than 63 bytes");if(t.port<=0)throw new Error("Port must be specified");return"Look like "+t.type+" address"}},Encoding:{name:"Encoding",description:"The character encoding of the server",type:"select",value:"utf-8",example:Z.IY.join(","),readonly:!1,suggestions:function(e){return[]},verify:function(e){for(var t in Z.IY)if(Z.IY[t]===e)return"";throw new Error('The character encoding "'+e+'" is not supported')}},Notice:{name:"Notice",description:"",type:"textdata",value:"SSH session is handled by the backend. Traffic will be decrypted on the backend server and then transmit back to your client.",example:"",readonly:!1,suggestions:function(e){return[]},verify:function(e){return""}},Password:{name:"Password",description:"",type:"password",value:"",example:"----------",readonly:!1,suggestions:function(e){return[]},verify:function(e){if(e.length<=0)throw new Error("Password must be specified");if(e.length>P)throw new Error("It's too long, make it shorter than 4096 bytes");return"We'll login with this password"}},"Private Key":{name:"Private Key",description:'Like the one inside <i style="color: #fff; font-style: normal;">~/.ssh/id_rsa</i>, can&apos;t be encrypted<br /><br />To decrypt the Private Key, use command: <i style="color: #fff; font-style: normal;">ssh-keygen -f /path/to/private_key -p</i><br /><br />It is strongly recommended to use one Private Key per SSH server if the Private Key will be submitted to Sshwifty. To generate a new SSH key pair, use command <i style="color: #fff; font-style: normal;">ssh-keygen -o -f /path/to/my_server_key</i> and then deploy the generated <i style="color: #fff; font-style: normal;">/path/to/my_server_key.pub</i> file onto the target SSH server',type:"textfile",value:"",example:"",readonly:!1,suggestions:function(e){return[]},verify:function(e){if(e.length<=0)throw new Error("Private Key must be specified");if(e.length>P)throw new Error("It's too long, make it shorter than 4096 bytes");var t=e.trim().split("\n"),n=!1;for(var r in t)if(n){if(0===t[r].indexOf("Proc-Type: 4,ENCRYPTED"))throw new Error("Cannot use encrypted Private Key file");if(!(t[r].indexOf(":")>0)){if(t[r].indexOf("MII")<0)throw new Error("Cannot use encrypted Private Key file");break}}else if(0===t[r].indexOf("-")&&(n=!0,t[r].indexOf("RSA")<=0))break;return"We'll login with this Private Key"}},Authentication:{name:"Authentication",description:"Please make sure the authentication method that you selected is supported by the server, otherwise it will be ignored and likely cause the login to fail",type:"radio",value:"",example:"Password,Private Key,None",readonly:!1,suggestions:function(e){return[]},verify:function(e){switch(e){case"Password":case"Private Key":case"None":return"";default:throw new Error("Authentication method must be specified")}}},Fingerprint:{name:"Fingerprint",description:"Please carefully verify the fingerprint. DO NOT continue if the fingerprint is unknown to you, otherwise you maybe giving your own secrets to an imposter",type:"textdata",value:"",example:"",readonly:!1,suggestions:function(e){return[]},verify:function(e){return""}}};function N(e){switch(e){case"None":return 0;case"Password":return 1;case"Private Key":return 2;default:throw new v.Z("Unknown Auth method")}}var W=function(){function e(t,n,r,s,i,a,o,u){(0,c.Z)(this,e),this.info=t,this.preset=n,this.hasStarted=!1,this.streams=i,this.session=r||{credential:""},this.keptSessions=s,this.step=a,this.controls=o.get("SSH"),this.history=u}var t,n;return(0,h.Z)(e,[{key:"run",value:function(){this.step.resolve(this.stepInitialPrompt())}},{key:"started",value:function(){return this.hasStarted}},{key:"control",value:function(){return this.controls}},{key:"close",value:function(){this.step.resolve(this.stepErrorDone("Action cancelled","Action has been cancelled without reach any success"))}},{key:"stepErrorDone",value:function(e,t){return f.aT(!1,null,e,t)}},{key:"stepSuccessfulDone",value:function(e){return f.aT(!0,e,"Success!","We have connected to the remote")}},{key:"stepWaitForAcceptWait",value:function(){return f.Dc("Requesting","Waiting for the request to be accepted by the backend")}},{key:"stepWaitForEstablishWait",value:function(e){return f.Dc("Connecting to "+e,"Establishing connection with the remote host, may take a while")}},{key:"stepContinueWaitForEstablishWait",value:function(){return f.Dc("Connecting","Establishing connection with the remote host, may take a while")}},{key:"buildCommand",value:function(e,t,n){var s,a=this,o={user:Z.yA(t.user),auth:N(t.authentication),charset:t.charset,credential:n.credential,host:A(t.host,22),fingerprint:t.fingerprint},u=a.keptSessions?(s=[]).concat.apply(s,(0,b.Z)(a.keptSessions)):[];return new H(e,o,{"initialization.failed":function(e){switch(e.data()){case 1:return void a.step.resolve(a.stepErrorDone("Request failed","Invalid username"));case 2:return void a.step.resolve(a.stepErrorDone("Request failed","Invalid address"));case 3:return void a.step.resolve(a.stepErrorDone("Request failed","Invalid authication method"))}a.step.resolve(a.stepErrorDone("Request failed","Unknown error: "+e.data()))},initialized:function(e){a.step.resolve(a.stepWaitForEstablishWait(t.host))},"connect.failed":function(e){return(0,r.Z)(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=new TextDecoder("utf-8"),t.next=3,x.QM(e);case 3:t.t1=t.sent,n=t.t0.decode.call(t.t0,t.t1),a.step.resolve(a.stepErrorDone("Connection failed",n));case 6:case"end":return t.stop()}}),t)})))()},"connect.succeed":function(e,r){a.connectionSucceed=!0,a.step.resolve(a.stepSuccessfulDone(new f.x4(t.user+"@"+t.host,a.info,a.controls.build({charset:t.charset,send:function(e){return r.sendData(e)},close:function(){return r.sendClose()},resize:function(e,t){return r.sendResize(e,t)},events:r.events}),a.controls.ui()))),a.history.save(a.info.name()+":"+t.user+"@"+t.host,t.user+"@"+t.host,new Date,a.info,t,n,u)},"connect.fingerprint":function(e,n){return(0,r.Z)(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=a.step,r.next=3,a.stepFingerprintPrompt(e,n,(function(e){return t.fingerprint?t.fingerprint===e?0:2:1}),(function(e){t.fingerprint=e}));case 3:r.t1=r.sent,r.t0.resolve.call(r.t0,r.t1);case 5:case"end":return r.stop()}}),r)})))()},"connect.credential":function(e,t){return(0,r.Z)(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a.step.resolve(a.stepCredentialPrompt(e,t,o,(function(e,t){n.credential=e,t&&u.indexOf("credential")<0&&u.push("credential")})));case 1:case"end":return r.stop()}}),r)})))()},"@stdout":function(e){},"@stderr":function(e){},close:function(){},"@completed":function(){a.step.resolve(a.stepErrorDone("Operation has failed","Connection has been cancelled"))}})}},{key:"stepInitialPrompt",value:function(){var e=this;return f.eB("SSH","Secure Shell Host","Connect",(function(t){e.hasStarted=!0,e.streams.request(1,(function(n){return e.buildCommand(n,{user:t.user,authentication:t.authentication,host:t.host,charset:t.encoding,fingerprint:e.preset?e.preset.metaDefault("Fingerprint",""):""},e.session)})),e.step.resolve(e.stepWaitForAcceptWait())}),(function(){}),f._Q(R,[{name:"User"},{name:"Host",suggestions:function(t){for(var n=e.history.search("SSH","host",t,3),r=[],s=0;s<n.length;s++)r.push({title:n[s].title,value:n[s].data.host,meta:{User:n[s].data.user,Authentication:n[s].data.authentication,Encoding:n[s].data.charset}});return r}},{name:"Authentication"},{name:"Encoding"},{name:"Notice"}],e.preset,(function(e){})))}},{key:"stepFingerprintPrompt",value:(n=(0,r.Z)(i().mark((function e(t,n,r,s){var a,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,e.t0=new TextDecoder("utf-8"),e.next=4,x.QM(t);case 4:e.t1=e.sent,o=e.t0.decode.call(e.t0,e.t1),u=!1,e.t2=r(o),e.next=0===e.t2?10:2===e.t2?12:13;break;case 10:return n.send(2,new Uint8Array([0])),e.abrupt("return",a.stepContinueWaitForEstablishWait());case 12:u=!0;case 13:return e.abrupt("return",f.eB(u?"Danger! Server fingerprint has changed!":"Do you recognize this server?",u?"It's very unusual. Please verify the new server fingerprint below":"Verify server fingerprint displayed below",u?"I'm aware of the change":"Yes, I do",(function(e){s(o),n.send(2,new Uint8Array([0])),a.step.resolve(a.stepContinueWaitForEstablishWait())}),(function(){n.send(2,new Uint8Array([1])),a.step.resolve(f.Dc("Rejecting","Sending rejection to the backend"))}),f.XU(R,[{name:"Fingerprint",value:o}])));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r,s){return n.apply(this,arguments)})},{key:"stepCredentialPrompt",value:(t=(0,r.Z)(i().mark((function e(t,n,r,s){var a,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this,o=[],!(r.credential.length>0)){e.next=5;break}return n.send(3,(new TextEncoder).encode(r.credential)),e.abrupt("return",a.stepContinueWaitForEstablishWait());case 5:e.t0=r.auth,e.next=1===e.t0?8:2===e.t0?10:12;break;case 8:return o=[{name:"Password"}],e.abrupt("break",13);case 10:return o=[{name:"Private Key"}],e.abrupt("break",13);case 12:throw new v.Z('Auth method "'+r.auth+'" was unsupported');case 13:return u=!1,c=f._Q(R,o,a.preset,(function(e){e===o[0].name&&(u=!0)})),e.abrupt("return",f.eB("Provide credential","Please input your credential","Login",(function(e){var t=e[o[0].name.toLowerCase()];n.send(3,(new TextEncoder).encode(t)),s(t,u),a.step.resolve(a.stepContinueWaitForEstablishWait())}),(function(){n.close(),a.step.resolve(f.Dc("Cancelling login","Cancelling login request, please wait"))}),c));case 16:case"end":return e.stop()}}),e,this)}))),function(e,n,r,s){return t.apply(this,arguments)})}]),e}(),z=function(e){(0,m.Z)(n,e);var t=T(n);function n(e,r,s,i,a,o,u,h){var l;return(0,c.Z)(this,n),(l=t.call(this,e,y.re(),s,i,a,o,u,h)).config=r,l}return(0,h.Z)(n,[{key:"stepInitialPrompt",value:function(){var e=this;return e.hasStarted=!0,e.streams.request(1,(function(t){return e.buildCommand(t,{user:e.config.user,authentication:e.config.authentication,host:e.config.host,charset:e.config.charset?e.config.charset:"utf-8",fingerprint:e.config.fingerprint},e.session)})),e.stepWaitForAcceptWait()}}]),n}(W),M=function(){function e(){(0,c.Z)(this,e)}return(0,h.Z)(e,[{key:"id",value:function(){return 1}},{key:"name",value:function(){return"SSH"}},{key:"description",value:function(){return"Secure Shell Host"}},{key:"color",value:function(){return"#3c8"}},{key:"wizard",value:function(e,t,n,r,s,i,a,o){return new W(e,t,n,r,s,i,a,o)}},{key:"execute",value:function(e,t,n,r,s,i,a,o){return new z(e,t,n,r,s,i,a,o)}},{key:"launch",value:function(e,t,n,r,s,i){var a=t.split("|",3);if(a.length<2)throw new v.Z('Given launcher "'+t+'" was invalid');var o=a[0].match(new RegExp("^(.*)\\@(.*)$"));if(!o||3!==o.length)throw new v.Z('Given launcher "'+t+'" was malformed');var u=o[1],c=o[2],h=a[1],l=a.length>=3&&a[2]?a[2]:"utf-8";try{R.User.verify(u),R.Host.verify(c),R.Authentication.verify(h),R.Encoding.verify(l)}catch(e){throw new v.Z('Given launcher "'+t+'" was malformed '+e)}return this.execute(e,{user:u,host:c,authentication:h,charset:l},null,null,n,r,s,i)}},{key:"launcher",value:function(e){return e.user+"@"+e.host+"|"+e.authentication+"|"+(e.charset?e.charset:"utf-8")}},{key:"represet",value:function(e){var t=e.host();return t.length>0&&e.insertMeta("Host",t),e}}]),e}();function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,g.Z)(e);if(t){var s=(0,g.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,k.Z)(this,n)}}var L=function(){function e(t,n,r){(0,c.Z)(this,e),this.sender=t,this.config=n,this.connected=!1,this.events=new S(["initialization.failed","initialized","connect.failed","connect.succeed","@inband","close","@completed"],r)}return(0,h.Z)(e,[{key:"run",value:function(e){var t=new D(this.config.host.type,this.config.host.address,this.config.host.port).buffer(),n=new Uint8Array(t.length);n.set(t,0),e.send(n)}},{key:"initialize",value:function(e){e.success()?this.events.fire("initialized",e):this.events.fire("initialization.failed",e)}},{key:"tick",value:function(e,t){switch(e.marker()){case 2:if(!this.connected)return this.connected=!0,this.events.fire("connect.succeed",t,this);break;case 1:if(!this.connected)return this.events.fire("connect.failed",t);break;case 0:if(this.connected)return this.events.fire("inband",t)}throw new v.Z("Unknown stream header marker")}},{key:"sendClose",value:function(){return this.sender.close()}},{key:"sendData",value:function(e){return this.sender.sendData(0,e)}},{key:"close",value:function(){return this.sendClose(),this.events.fire("close")}},{key:"completed",value:function(){return this.events.fire("completed")}}]),e}(),F={Host:{name:"Host",description:'Looking for server to connect&quest; Checkout <a href="http://www.telnet.org/htm/places.htm" target="blank">telnet.org</a> for public servers.',type:"text",value:"",example:"telnet.vaguly.com:23",readonly:!1,suggestions:function(e){return[]},verify:function(e){if(e.length<=0)throw new Error("Hostname must be specified");var t=Z.xu(e,23);if(t.addr.length<=0)throw new Error("Cannot be empty");if(t.addr.length>E)throw new Error("Can no longer than 63 bytes");if(t.port<=0)throw new Error("Port must be specified");return"Look like "+t.type+" address"}},Encoding:{name:"Encoding",description:"The character encoding of the server",type:"select",value:"utf-8",example:Z.IY.join(","),readonly:!1,suggestions:function(e){return[]},verify:function(e){for(var t in Z.IY)if(Z.IY[t]===e)return"";throw new Error('The character encoding "'+e+'" is not supported')}}},q=function(){function e(t,n,r,s,i,a,o,u){(0,c.Z)(this,e),this.info=t,this.preset=n,this.hasStarted=!1,this.streams=i,this.session=r,this.keptSessions=s,this.step=a,this.controls=o.get("Telnet"),this.history=u}return(0,h.Z)(e,[{key:"run",value:function(){this.step.resolve(this.stepInitialPrompt())}},{key:"started",value:function(){return this.hasStarted}},{key:"control",value:function(){return this.controls}},{key:"close",value:function(){this.step.resolve(this.stepErrorDone("Action cancelled","Action has been cancelled without reach any success"))}},{key:"stepErrorDone",value:function(e,t){return f.aT(!1,null,e,t)}},{key:"stepSuccessfulDone",value:function(e){return f.aT(!0,e,"Success!","We have connected to the remote")}},{key:"stepWaitForAcceptWait",value:function(){return f.Dc("Requesting","Waiting for the request to be accepted by the backend")}},{key:"stepWaitForEstablishWait",value:function(e){return f.Dc("Connecting to "+e,"Establishing connection with the remote host, may take a while")}},{key:"buildCommand",value:function(e,t,n){var s,a=this,o={host:A(t.host,23),charset:t.charset},u=a.keptSessions?(s=[]).concat.apply(s,(0,b.Z)(a.keptSessions)):[];return new L(e,o,{"initialization.failed":function(e){switch(e.data()){case 1:return void a.step.resolve(a.stepErrorDone("Request rejected","Invalid address"))}a.step.resolve(a.stepErrorDone("Request rejected","Unknown error code: "+e.data()))},initialized:function(e){a.step.resolve(a.stepWaitForEstablishWait(t.host))},"connect.succeed":function(e,r){a.step.resolve(a.stepSuccessfulDone(new f.x4(t.host,a.info,a.controls.build({charset:o.charset,send:function(e){return r.sendData(e)},close:function(){return r.sendClose()},events:r.events}),a.controls.ui()))),a.history.save(a.info.name()+":"+t.host,t.host,new Date,a.info,t,n,u)},"connect.failed":function(e){return(0,r.Z)(i().mark((function t(){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.QM(e);case 2:n=t.sent,r=new TextDecoder("utf-8").decode(n.buffer),a.step.resolve(a.stepErrorDone("Connection failed",r));case 5:case"end":return t.stop()}}),t)})))()},"@inband":function(e){},close:function(){},"@completed":function(){}})}},{key:"stepInitialPrompt",value:function(){var e=this;return f.eB("Telnet","Teletype Network","Connect",(function(t){e.hasStarted=!0,e.streams.request(0,(function(n){return e.buildCommand(n,{host:t.host,charset:t.encoding},e.session)})),e.step.resolve(e.stepWaitForAcceptWait())}),(function(){}),f._Q(F,[{name:"Host",suggestions:function(t){for(var n=e.history.search("Telnet","host",t,3),r=[],s=0;s<n.length;s++)r.push({title:n[s].title,value:n[s].data.host,meta:{Encoding:n[s].data.charset}});return r}},{name:"Encoding"}],e.preset,(function(e){})))}}]),e}(),K=function(e){(0,m.Z)(n,e);var t=O(n);function n(e,r,s,i,a,o,u,h){var l;return(0,c.Z)(this,n),(l=t.call(this,e,y.re(),s,i,a,o,u,h)).config=r,l}return(0,h.Z)(n,[{key:"stepInitialPrompt",value:function(){var e=this;return e.hasStarted=!0,e.streams.request(0,(function(t){return e.buildCommand(t,{host:e.config.host,charset:e.config.charset?e.config.charset:"utf-8"},e.session)})),e.stepWaitForAcceptWait()}}]),n}(q),_=function(){function e(){(0,c.Z)(this,e)}return(0,h.Z)(e,[{key:"id",value:function(){return 0}},{key:"name",value:function(){return"Telnet"}},{key:"description",value:function(){return"Teletype Network"}},{key:"color",value:function(){return"#6ac"}},{key:"wizard",value:function(e,t,n,r,s,i,a,o){return new q(e,t,n,r,s,i,a,o)}},{key:"execute",value:function(e,t,n,r,s,i,a,o){return new K(e,t,n,r,s,i,a,o)}},{key:"launch",value:function(e,t,n,r,s,i){var a=t.split("|",2);if(a.length<=0)throw new v.Z('Given launcher "'+t+'" was invalid');try{F.Host.verify(a[0])}catch(e){throw new v.Z('Given launcher "'+t+'" was invalid: '+e)}var o="utf-8";if(a.length>1)try{F.Encoding.verify(a[1]),o=a[1]}catch(e){throw new v.Z('Given launcher "'+t+'" was invalid: '+e)}return this.execute(e,{host:a[0],charset:o},null,null,n,r,s,i)}},{key:"launcher",value:function(e){return e.host+"|"+(e.charset?e.charset:"utf-8")}},{key:"represet",value:function(e){var t=e.host();return t.length>0&&e.insertMeta("Host",t),e}}]),e}(),B=n(4914),G=n(5012),j=function(){function e(t,n){var s=this;if((0,c.Z)(this,e),this.colorM=n,this.colors=this.colorM.get(),this.charset=t.charset,"utf-8"===this.charset){var a=new TextEncoder;this.charsetDecoder=function(e){return e},this.charsetEncoder=function(e){return a.encode(e)}}else{var o=new TextDecoder(this.charset),u=new TextEncoder;this.charsetDecoder=function(e){return u.encode(o.decode(e,{stream:!0}))},this.charsetEncoder=function(e){return B.encode(e,s.charset)}}this.enable=!1,this.sender=t.send,this.closer=t.close,this.resizer=t.resize,this.subs=new G.x;var h=this;t.events.place("stdout",function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=h.subs,e.t1=h,e.next=5,x.QM(t);case 5:e.t2=e.sent,e.t3=e.t1.charsetDecoder.call(e.t1,e.t2),e.t0.resolve.call(e.t0,e.t3),e.next=12;break;case 10:e.prev=10,e.t4=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),t.events.place("stderr",function(){var e=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=h.subs,e.t1=h,e.next=5,x.QM(t);case 5:e.t2=e.sent,e.t3=e.t1.charsetDecoder.call(e.t1,e.t2),e.t0.resolve.call(e.t0,e.t3),e.next=12;break;case 10:e.prev=10,e.t4=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()),t.events.place("completed",(function(){h.closed=!0,h.colorM.forget(h.colors.color),h.subs.reject("Remote connection has been terminated")}))}return(0,h.Z)(e,[{key:"echo",value:function(){return!1}},{key:"resize",value:function(e){this.closed||this.resizer(e.rows,e.cols)}},{key:"enabled",value:function(){this.enable=!0}},{key:"disabled",value:function(){this.enable=!1}},{key:"retap",value:function(e){}},{key:"receive",value:function(){return this.subs.subscribe()}},{key:"send",value:function(e){if(!this.closed)return this.sender(this.charsetEncoder(e))}},{key:"sendBinary",value:function(e){if(!this.closed)return this.sender(Z.TK(e))}},{key:"color",value:function(){return this.colors.dark}},{key:"activeColor",value:function(){return this.colors.color}},{key:"close",value:function(){if(null!==this.closer){var e=this.closer;return this.closer=null,e()}}}]),e}(),Y=function(){function e(t){(0,c.Z)(this,e),this.color=t}return(0,h.Z)(e,[{key:"type",value:function(){return"SSH"}},{key:"ui",value:function(){return"Console"}},{key:"build",value:function(e){return new j(e,this.color)}}]),e}(),Q=251,X=252,V=253,$=254,J=255,ee=new Uint8Array([0,88,84,69,82,77]),te=function(){function e(t,n,r){(0,c.Z)(this,e),this.sender=t,this.flusher=n,this.callbacks=r,this.reader=new x.fN((function(){})),this.options={echoEnabled:!1,suppressGoAhead:!1,nawsAccpeted:!1},this.current=0}var t,n,s,a;return(0,h.Z)(e,[{key:"sendNego",value:function(e,t){return this.sender(new Uint8Array([J,e,t]))}},{key:"sendDeny",value:function(e,t){switch(e){case V:return this.sendNego(X,t);case X:return this.sendNego($,t)}}},{key:"sendWillSubNego",value:function(e,t,n){var r=new Uint8Array(6+t.length+2);return r.set([J,e,n,J,250,n],0),r.set(t,6),r.set([J,240],t.length+6),this.sender(r)}},{key:"sendSubNego",value:function(e,t){var n=new Uint8Array(3+e.length+2);return n.set([J,250,t],0),n.set(e,3),n.set([J,240],e.length+3),this.sender(n)}},{key:"handleTermTypeSubNego",value:(a=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Nm(t);case 2:if(1===e.sent[0]){e.next=5;break}return e.abrupt("return",null);case 5:return n=this,e.abrupt("return",(function(){n.sendSubNego(ee,24)}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"handleSubNego",value:(s=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null;case 1:return e.next=3,x.Nm(t);case 3:r=e.sent,e.t0=r[0],e.next=24===e.t0?7:e.t0===J?11:12;break;case 7:return e.next=9,this.handleTermTypeSubNego(t);case 9:return n=e.sent,e.abrupt("continue",20);case 11:return e.abrupt("break",13);case 12:return e.abrupt("continue",20);case 13:return e.next=15,x.Nm(t);case 15:if(240===e.sent[0]){e.next=18;break}return e.abrupt("continue",20);case 18:return null!==n&&n(),e.abrupt("return");case 20:e.next=1;break;case 22:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"handleOption",value:function(e,t,n,r){switch(e){case Q:return n||this.sendNego(V,t),void r(!0,Q);case X:return n&&this.sendNego($,t),void r(!1,X);case V:return n||this.sendNego(Q,t),void r(!0,V);case $:return n&&this.sendNego(X,t),void r(!1,$)}}},{key:"handleCmd",value:(n=(0,r.Z)(i().mark((function e(t){var n,r,s,a,o,u=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Nm(t);case 2:n=e.sent,e.t0=n[0],e.next=e.t0===Q||e.t0===X||e.t0===V||e.t0===$?6:e.t0===J?7:249===e.t0?9:250===e.t0?10:13;break;case 6:return e.abrupt("break",14);case 7:return this.flusher(n),e.abrupt("return");case 9:return e.abrupt("return");case 10:return e.next=12,this.handleSubNego(t);case 12:return e.abrupt("return");case 13:throw new v.Z("Unknown command");case 14:return e.next=16,x.Nm(t);case 16:r=e.sent,e.t1=r[0],e.next=1===e.t1?20:3===e.t1?21:31===e.t1?22:24===e.t1?35:40;break;case 20:return e.abrupt("return",this.handleOption(n[0],r[0],this.options.echoEnabled,(function(e,t){switch(u.options.echoEnabled=e,t){case Q:case $:u.callbacks.setEcho(!1);break;case X:case V:u.callbacks.setEcho(!0)}})));case 21:return e.abrupt("return",this.handleOption(n[0],r[0],this.options.suppressGoAhead,(function(e,t){u.options.suppressGoAhead=e})));case 22:if(n[0]===V){e.next=25;break}return this.sendDeny(n[0],r[0]),e.abrupt("return");case 25:if(s=this.callbacks.getWindowDim(),(a=new DataView(new ArrayBuffer(4))).setUint16(0,s.cols),a.setUint16(2,s.rows),o=new Uint8Array(a.buffer),!this.options.nawsAccpeted){e.next=32;break}return this.sendSubNego(o,31),e.abrupt("return");case 32:return this.options.nawsAccpeted=!0,this.sendWillSubNego(Q,o,31),e.abrupt("return");case 35:if(n[0]===V){e.next=38;break}return this.sendDeny(n[0],r[0]),e.abrupt("return");case 38:return this.sendNego(Q,r[0]),e.abrupt("return");case 40:this.sendDeny(n[0],r[0]);case 41:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"requestWindowResize",value:function(){this.options.nawsAccpeted=!0,this.sendNego(Q,31)}},{key:"run",value:(t=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:return e.next=3,x.Tb(this.reader,J);case 3:if((t=e.sent).found){e.next=7;break}return this.flusher(t.data),e.abrupt("continue",10);case 7:return t.data.length>1&&this.flusher(t.data.slice(0,t.data.length-1)),e.next=10,this.handleCmd(this.reader);case 10:e.next=1;break;case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(){return t.apply(this,arguments)})},{key:"feed",value:function(e,t){this.reader.feed(e,t)}},{key:"close",value:function(){this.reader.close()}}]),e}(),ne=function(){function e(t,n){var s=this;if((0,c.Z)(this,e),this.colorM=n,this.colors=this.colorM.get(),this.charset=t.charset,"utf-8"===this.charset){var a=new TextEncoder;this.charsetDecoder=function(e){return e},this.charsetEncoder=function(e){return a.encode(e)}}else{var o=new TextDecoder(this.charset),u=new TextEncoder;this.charsetDecoder=function(e){return u.encode(o.decode(e,{stream:!0}))},this.charsetEncoder=function(e){return B.encode(e,s.charset)}}this.sender=t.send,this.closer=t.close,this.closed=!1,this.localEchoEnabled=!0,this.subs=new G.x,this.enable=!1,this.windowDim={cols:65535,rows:65535};var h=this;this.parser=new te(this.sender,(function(e){h.subs.resolve(s.charsetDecoder(e))}),{setEcho:function(e){h.localEchoEnabled=e},getWindowDim:function(){return h.windowDim}});var l=this.parser.run();t.events.place("inband",(function(e){return new Promise((function(t,n){h.parser.feed(e,(function(){t(!0)}))}))})),t.events.place("completed",(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.parser.close(),h.closed=!0,h.colorM.forget(h.colors.color),e.next=5,l;case 5:h.subs.reject("Remote connection has been terminated");case 6:case"end":return e.stop()}}),e)}))))}return(0,h.Z)(e,[{key:"echo",value:function(){return this.localEchoEnabled}},{key:"resize",value:function(e){this.closed||(this.windowDim.cols=e.cols,this.windowDim.rows=e.rows,this.parser.requestWindowResize())}},{key:"enabled",value:function(){this.enable=!0}},{key:"disabled",value:function(){this.enable=!1}},{key:"retap",value:function(e){}},{key:"receive",value:function(){return this.subs.subscribe()}},{key:"searchNextIAC",value:function(e,t){for(var n=e;n<t.length;n++)if(t[n]===J)return n;return-1}},{key:"sendSeg",value:function(e){for(var t=0;t<e.length;){var n=this.searchNextIAC(t,e);if(n<0)return void this.sender(e.slice(t,e.length));this.sender(e.slice(t,n+1)),this.sender(e.slice(n,n+1)),t=n+1}}},{key:"send",value:function(e){this.closed||this.sendSeg(this.charsetEncoder(e))}},{key:"sendBinary",value:function(e){if(!this.closed)return this.sendSeg(Z.TK(e))}},{key:"color",value:function(){return this.colors.dark}},{key:"activeColor",value:function(){return this.colors.color}},{key:"close",value:function(){if(null!==this.closer){var e=this.closer;return this.closer=null,e()}}}]),e}(),re=function(){function e(t){(0,c.Z)(this,e),this.color=t}return(0,h.Z)(e,[{key:"type",value:function(){return"Telnet"}},{key:"ui",value:function(){return"Console"}},{key:"build",value:function(e){return new ne(e,this.color)}}]),e}(),se=n(456),ie=n(9445),ae=n(7034),oe=n(123),ue=n(3659),ce=n(7099),he='\n<home\n  v-if="page == \'app\'"\n  :host-path="hostPath"\n  :query="query"\n  :connection="socket"\n  :controls="controls"\n  :commands="commands"\n  :preset-data="presetData.presets"\n  :restricted-to-presets="presetData.restricted"\n  :view-port="viewPort"\n  @navigate-to="changeURLHash"\n  @tab-opened="tabOpened"\n  @tab-closed="tabClosed"\n  @tab-updated="tabUpdated"\n></home>\n<auth\n  v-else-if="page == \'auth\'"\n  :error="authErr"\n  @auth="submitAuth"\n></auth>\n<loading v-else :error="loadErr"></loading>\n'.trim(),le="/sshwifty/socket";function de(){var e=document.getElementById("landing");if(e){0,window.addEventListener("unhandledrejection",(function(e){console.error("Error:",e)})),window.addEventListener("error",(function(e){console.error("Error:",e)})),e.parentNode.removeChild(e);var t=document.createElement("div");t.setAttribute("id","app"),t.innerHTML=he,document.body.insertBefore(t,document.body.firstChild),function(e){var t=document.title,n=new d;function s(){return Number(Math.trunc((new Date).getTime()/1e5)).toString()}function o(e){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,se.hmac512(ue.HM(t),ue.HM(s()));case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1).slice(0,16));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}new a.Z({el:e,components:{loading:ae.Z,auth:u,home:ie.Z},data:function(){return{hostPath:window.location.protocol+"//"+window.location.host+window.location.pathname,query:window.location.hash.length>0&&0===window.location.hash.indexOf("#")?window.location.hash.slice(1,window.location.hash.length):"",page:"loading",key:"",presetData:{presets:new y.s8([]),restricted:!1},authErr:"",loadErr:"",socket:null,controls:new w([new re(n),new Y(n)]),commands:new f.Gh([new _,new M]),tabUpdateIndicator:null,viewPort:{dim:{width:0,height:0,renew:function(e,t){this.width=e,this.height=t}}},viewPortUpdaters:{width:0,height:0,dimResizer:null}}},watch:{loadErr:function(){this.isErrored()?document.body.classList.add("app-error"):document.body.classList.remove("app-error")},authErr:function(){this.isErrored()?document.body.classList.add("app-error"):document.body.classList.remove("app-error")}},mounted:function(){var e=this;e.tryInitialAuth(),e.viewPortUpdaters.dimResizer=function(){e.viewPortUpdaters.height=window.innerHeight,e.viewPortUpdaters.width=window.innerWidth,e.$nextTick((function(){e.viewPort.dim.renew(e.viewPortUpdaters.width,e.viewPortUpdaters.height)}))},window.addEventListener("resize",e.viewPortUpdaters.dimResizer)},beforeDestroy:function(){window.removeEventListener("resize",self.viewPortUpdaters.dimResizer)},methods:{changeTitleInfo:function(e){document.title=e+" "+t},resetTitleInfo:function(){document.title=t},changeURLHash:function(e){window.location.hash=e},isErrored:function(){return this.authErr.length>0||this.loadErr.length>0},getSocketAuthKey:function(e){return(0,r.Z)(i().mark((function t(){var n,r,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new TextEncoder,r=Number(Math.trunc((new Date).getTime()/1e5)),s="",s=e.length<=0?"DEFAULT VERIFY KEY":e,t.t0=Uint8Array,t.next=6,se.hmac512(n.encode(s),n.encode(r));case 6:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1).slice(0,32));case 8:case"end":return t.stop()}}),t)})))()},buildBackendSocketURLs:function(){var e={webSocket:"",keepAlive:""};switch(location.protocol){case"https:":e.webSocket="wss://";break;default:e.webSocket="ws://"}return e.webSocket+=location.host+le,e.keepAlive=location.protocol+"//"+location.host+le,e},buildSocket:function(e,t,n){return new oe.s(this.buildBackendSocketURLs(),e,1e3*t,1e3*n)},executeHomeApp:function(e,t){this.presetData={presets:new y.s8(JSON.parse(e.data)),restricted:e.onlyAllowPresetRemotes},this.socket=this.buildSocket(t,e.timeout,e.heartbeat),this.page="app"},doAuth:function(e){var t=this;return(0,r.Z)(i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.requestAuth(e);case 2:return(r=n.sent).key&&(t.key=r.key),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},requestAuth:function(e){var t=this;return(0,r.Z)(i().mark((function n(){var r,s,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t.key){n.next=4;break}n.t0=null,n.next=7;break;case 4:return n.next=6,t.getSocketAuthKey(e);case 6:n.t0=n.sent;case 7:return r=n.t0,n.next=10,ce.U("/sshwifty/socket/verify",{"X-Key":r?btoa(String.fromCharCode.apply(null,r)):""});case 10:return s=n.sent,a=s.getResponseHeader("Date"),n.abrupt("return",{result:s.status,key:s.getResponseHeader("X-Key"),timeout:s.getResponseHeader("X-Timeout"),heartbeat:s.getResponseHeader("X-Heartbeat"),date:a?new Date(a):null,data:s.responseText,onlyAllowPresetRemotes:"yes"===s.getResponseHeader("X-OnlyAllowPresetRemotes")});case 13:case"end":return n.stop()}}),n)})))()},tryInitialAuth:function(){var e=this;return(0,r.Z)(i().mark((function t(){var n,s,a,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.doAuth("");case 3:if(!(n=t.sent).date){t.next=9;break}if(s=n.date.getTime(),a=(new Date).getTime(),!(Math.abs(s-a)>3e4)){t.next=9;break}return e.loadErr="The time difference between this client and the backend server is beyond operational limit.\r\n\r\nPlease try reload the page, and if the problem persisted, consider to adjust your local time so both the client and the server are running at same date time",t.abrupt("return");case 9:u=e,t.t0=n.result,t.next=200===t.t0?13:403===t.t0?15:0===t.t0?17:19;break;case 13:return e.executeHomeApp(n,{fetch:function(){return(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.doAuth("");case 2:if(200===(t=e.sent).result){e.next=5;break}throw new Error("Unable to fetch key from remote, unexpected error code: "+t.result);case 5:return e.next=7,o(atob(t.key)+"+");case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))()}}),t.abrupt("break",20);case 15:return e.page="auth",t.abrupt("break",20);case 17:return setTimeout((function(){e.tryInitialAuth()}),2e3),t.abrupt("break",20);case 19:alert("Unexpected backend query status: "+n.result);case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(0),e.loadErr="Unable to initialize client application: "+t.t1;case 25:case"end":return t.stop()}}),t,null,[[0,22]])})))()},submitAuth:function(e){var t=this;return(0,r.Z)(i().mark((function n(){var s,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.authErr="",n.prev=1,n.next=4,t.doAuth(e);case 4:s=n.sent,a=t,n.t0=s.result,n.next=200===n.t0?9:403===n.t0?11:13;break;case 9:return t.executeHomeApp(s,{fetch:function(){return(0,r.Z)(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.doAuth(e);case 2:if(200===(n=t.sent).result){t.next=5;break}throw new Error("Unable to fetch key from remote, unexpected error code: "+n.result);case 5:return t.next=7,o(atob(n.key)+"+"+e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()}}),n.abrupt("break",14);case 11:return t.authErr="Authentication has failed. Wrong passphrase?",n.abrupt("break",14);case 13:t.authErr="Unexpected backend query status: "+s.result;case 14:n.next=19;break;case 16:n.prev=16,n.t1=n.catch(1),t.authErr="Unable to authenticate: "+n.t1;case 19:case"end":return n.stop()}}),n,null,[[1,16]])})))()},updateTabTitleInfo:function(e,t){e.length<=0?this.resetTitleInfo():this.changeTitleInfo("("+e.length+(t?"*":"")+")")},tabOpened:function(e){this.tabUpdated(e)},tabClosed:function(e){e.length>0?this.updateTabTitleInfo(e,null!==this.tabUpdateIndicator):(this.tabUpdateIndicator&&(clearTimeout(this.tabUpdateIndicator),this.tabUpdateIndicator=null),this.updateTabTitleInfo(e,!1))},tabUpdated:function(e){var t=this;this.tabUpdateIndicator&&(clearTimeout(this.tabUpdateIndicator),this.tabUpdateIndicator=null),this.updateTabTitleInfo(e,!0),this.tabUpdateIndicator=setTimeout((function(){t.tabUpdateIndicator=null,t.updateTabTitleInfo(e,!1)}),3e3)}}})}(t)}}window.addEventListener("load",de),document.addEventListener("load",de),document.addEventListener("DOMContentLoaded",de)},993:(e,t,n)=>{"use strict";n.d(t,{F0:()=>l,PT:()=>d,g4:()=>f,x4:()=>p,XU:()=>k,_Q:()=>g,aT:()=>Z,Dc:()=>E,eB:()=>D,Gh:()=>T});var r=n(2137),s=n(484),i=n(5991),a=n(6610),o=n(7757),u=n.n(o),c=n(5012),h=n(5130),l=(n(8065),1),d=2,f=3,p=function e(t,n,r,s){(0,a.Z)(this,e),this.name=t,this.info=n,this.control=r,this.ui=s},v=function(){function e(t){(0,a.Z)(this,e),this.s=!!t.success,this.d=t.successData,this.errorTitle=t.errorTitle,this.errorMessage=t.errorMessage}return(0,i.Z)(e,[{key:"error",value:function(){return this.errorTitle}},{key:"message",value:function(){return this.errorMessage}},{key:"success",value:function(){return this.s}},{key:"data",value:function(){return this.d}}]),e}(),w=function(){function e(t){(0,a.Z)(this,e),this.t=t.title,this.m=t.message}return(0,i.Z)(e,[{key:"title",value:function(){return this.t}},{key:"message",value:function(){return this.m}}]),e}(),y={name:"",description:"",type:"",value:"",example:"",readonly:!1,suggestions:function(e){return[]},verify:function(e){return""}};function m(e,t){var n={};for(var r in e)n[r]=e[r];for(var i in t){if((0,s.Z)(n[i])!==(0,s.Z)(t[i]))throw new h.Z('Field data type for "'+i+'" was unmatched. Expecting "'+(0,s.Z)(n[i])+'", got "'+(0,s.Z)(t[i])+'" instead');n[i]=t[i]}if(!n.name)throw new h.Z('Field "name" must be specified');return n}function k(e,t){var n=[];for(var r in t){if(!t[r].name)throw new h.Z('Field "name" must be specified');if(!e[t[r].name])throw new h.Z('Undefined field "'+t[r].name+'"');n.push(m(e[t[r].name],t[r]))}return n}function g(e,t,n,r){var s=k(e,t);for(var i in s)try{s[i].value=n.meta(s[i].name),s[i].readonly=!0,r(s[i].name)}catch(e){}return s}var b=function(){function e(t){for(var n in(0,a.Z)(this,e),this.t=t.title,this.m=t.message,this.a=t.actionText,this.r=t.respond,this.c=t.cancel,this.i=[],this.f={},t.inputs){var r=m(y,t.inputs[n]);this.i.push(r),this.f[t.inputs[n].name.toLowerCase()]={value:r.value,verify:r.verify}}}return(0,i.Z)(e,[{key:"title",value:function(){return this.t}},{key:"message",value:function(){return this.m}},{key:"inputs",value:function(){var e=[];for(var t in this.i)e.push(this.i[t]);return e}},{key:"actionText",value:function(){return this.a}},{key:"submit",value:function(e){var t={};for(var n in this.f)t[n]=this.f[n].value;for(var r in e){var s=r.toLowerCase();if(void 0===t[s])throw new h.Z('Field "'+s+'" is undefined');try{this.f[s].verify(e[r])}catch(e){throw new h.Z('Field "'+s+'" is invalid: '+e)}t[s]=e[r]}return this.r(t)}},{key:"cancel",value:function(){return this.c()}}]),e}();function x(e,t){return{type:function(){return e},data:function(){return t}}}function Z(e,t,n,r){return x(f,{success:e,successData:t,errorTitle:n,errorMessage:r})}function E(e,t){return x(d,{title:e,message:t})}function D(e,t,n,r,s,i){return x(l,{title:e,message:t,actionText:n,inputs:i,respond:r,cancel:s})}var A=function(){function e(t){(0,a.Z)(this,e),this.t=t.type(),this.d=t.data()}return(0,i.Z)(e,[{key:"type",value:function(){return this.t}},{key:"data",value:function(){switch(this.type()){case l:return new b(this.d);case d:return new w(this.d);case f:return new v(this.d);default:throw new h.Z("Unknown data type")}}}]),e}(),S=function(){function e(t,n,r){(0,a.Z)(this,e),this.built=t,this.subs=n,this.done=r,this.closed=!1,this.built.run()}var t;return(0,i.Z)(e,[{key:"next",value:(t=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.closed){e.next=2;break}throw new h.Z("Wizard already closed, no next step is available");case 2:return e.next=4,this.subs.subscribe();case 4:return(t=e.sent).type()===f&&(this.close(),this.done(t)),e.abrupt("return",new A(t));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"started",value:function(){return this.built.started()}},{key:"control",value:function(){return this.built.control()}},{key:"close",value:function(){if(!this.closed)return this.closed=!0,this.built.close()}}]),e}(),U=function(){function e(t){(0,a.Z)(this,e),this.type=t.name(),this.info=t.description(),this.tcolor=t.color()}return(0,i.Z)(e,[{key:"name",value:function(){return this.type}},{key:"description",value:function(){return this.info}},{key:"color",value:function(){return this.tcolor}}]),e}(),C=function(){function e(t){(0,a.Z)(this,e),this.cid=t.id(),this.represeter=function(e){return t.represet(e)},this.wizarder=function(e,n,r,s,i,a,o,u){return t.wizard(e,n,r,s,i,a,o,u)},this.executer=function(e,n,r,s,i,a,o,u){return t.execute(e,n,r,s,i,a,o,u)},this.launchCmd=function(e,n,r,s,i,a){return t.launch(e,n,r,s,i,a)},this.launcherCmd=function(e){return t.launcher(e)},this.type=t.name(),this.info=t.description(),this.tcolor=t.color()}return(0,i.Z)(e,[{key:"id",value:function(){return this.cid}},{key:"name",value:function(){return this.type}},{key:"description",value:function(){return this.info}},{key:"color",value:function(){return this.tcolor}},{key:"wizard",value:function(e,t,n,r,s,i,a){var o=new c.x;return new S(this.wizarder(new U(this),r,s,i,e,o,t,n),o,a)}},{key:"execute",value:function(e,t,n,r,s,i,a){var o=new c.x;return new S(this.executer(new U(this),r,s,i,e,o,t,n),o,a)}},{key:"launch",value:function(e,t,n,r,s){var i=new c.x;return new S(this.launchCmd(new U(this),decodeURI(r),e,i,t,n),i,s)}},{key:"launcher",value:function(e){return this.name()+":"+encodeURI(this.launcherCmd(e))}},{key:"represet",value:function(e){return this.represeter(e)}}]),e}(),I=function e(t,n){(0,a.Z)(this,e),this.preset=t,this.command=n},T=function(){function e(t){(0,a.Z)(this,e),this.commands=[];for(var n=0;n<t.length;n++)this.commands.push(new C(t[n]))}return(0,i.Z)(e,[{key:"all",value:function(){return this.commands}},{key:"select",value:function(e){return this.commands[e]}},{key:"mergePresets",value:function(e){for(var t=[],n=0;n<this.commands.length;n++)for(var r=e.fetch(this.commands[n].name()),s=0;s<r.length;s++)t.push(new I(this.commands[n].represet(r[s]),this.commands[n]));return t}}]),e}()},5237:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,hj:()=>h,yA:()=>p,TK:()=>v,xu:()=>m});var r=n(8764),s=n(4914),i=n(5130),a=["utf-8","ibm866","iso-8859-2","iso-8859-3","iso-8859-4","iso-8859-5","iso-8859-6","iso-8859-7","iso-8859-8","iso-8859-10","iso-8859-13","iso-8859-14","iso-8859-15","iso-8859-16","koi8-r","koi8-u","macintosh","windows-874","windows-1250","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","gbk","gb18030","big5","euc-jp","shift-jis","euc-kr","utf-16be","utf-16le"],o=function(){var e=[];for(var t in a)try{if(!s.encodingExists(a[t]))continue;new TextDecoder(a[t]),e.push(a[t])}catch(e){}return e}(),u={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0},c={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0};function h(e){for(var t=0;t<e.length;t++)if(!u[e[t]])return!1;return!0}function l(e){for(var t=e.toLowerCase(),n=0;n<t.length;n++)if(!c[t[n]])return!1;return!0}function d(e){var t=e.split(".");if(4!=t.length)throw new i.Z("Invalid address");var n=new Uint8Array(4);for(var r in t){if(!h(t[r]))throw new i.Z("Invalid address");var s=parseInt(t[r],10);if(isNaN(s))throw new i.Z("Invalid address");if(s>255)throw new i.Z("Invalid address");n[r]=s}return n}function f(e){var t=e.split(":");if(t.length>8||t.length<=1)throw new i.Z("Invalid address");if("["===t[0].charAt(0)){t[0]=t[0].substring(1,t[0].length);var n=t.length-1;if("]"!==t[n].charAt(t[n].length-1))throw new i.Z("Invalid address");t[n]=t[n].substring(0,t[n].length-1)}for(var r=new Uint16Array(8),s=0,a=0;a<t.length;a++)if(t[a].length<=0)s=8-t.length;else{if(!l(t[a]))throw new i.Z("Invalid address");var o=parseInt(t[a],16);if(isNaN(o))throw new i.Z("Invalid address");if(o>65535)throw new i.Z("Invalid address");r[s+a]=o}return r}function p(e){for(var t=new Uint8Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}function v(e){return new Uint8Array(r.Buffer.from(e,"binary").buffer)}function w(e){if(e.length<=0)throw new i.Z("Invalid address");if(!function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(!(n>=32&&n<=126||128===n||n>=130&&n<=140||142===n||n>=145&&n<=156||n>=158&&n<=159||n>=161&&n<=255))return!1}return!0}(e))throw new i.Z("Invalid address");return p(e)}function y(e){try{return{type:"IPv4",data:d(e)}}catch(e){}try{return{type:"IPv6",data:new Uint8Array(f(e).buffer)}}catch(e){}return{type:"Hostname",data:w(e)}}function m(e,t){var n=e.lastIndexOf(":"),r=e.indexOf(":"),s=e.indexOf("[");if((n<0||n!=r)&&s<0){var a=y(e);return{type:a.type,addr:a.data,port:t}}if(s>0)throw new i.Z("Invalid address");if(0===s){var o=e.lastIndexOf("]");if(o<=s||o+1!=n)throw new i.Z("Invalid address")}var u=e.slice(0,n),c=e.slice(n+1,e.length);if(!h(c))throw new i.Z("Invalid address");var l=parseInt(c,10),d=y(u);return{type:d.type,addr:d.data,port:l}}},5130:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(6610),s=n(379),i=n(6616),a=n(7608);function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,a.Z)(e);if(t){var s=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var u=function(e){(0,s.Z)(n,e);var t=o(n);function n(e){return(0,r.Z)(this,n),t.call(this,e)}return n}((0,n(5366).Z)(Error))},947:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(6610),s=n(5991),i=n(484);n(993);function a(e,t){if(!e||"object"!==(0,i.Z)(e)||e.length<0)return null;var n={},r=0;for(var s in e)t[e[s]]&&(n[e[s]]=t[e[s]],r++);return r<=0?null:n}function o(e,t,n){switch((0,i.Z)(e[t])){case"string":return e[t].indexOf(n)>=0;default:return!1}}var u=function(){function e(t,n,s){(0,r.Z)(this,e),this.records=t,this.maxItems=s,this.saver=n}return(0,s.Z)(e,[{key:"indexOf",value:function(e){for(var t in this.records)if(this.records[t].uname===e)return t;return-1}},{key:"save",value:function(e,t,n,r,s,i,a){var o=this.indexOf(e);o>=0&&this.records.splice(o,1),this.records.push({uname:e,title:t,type:r.name(),color:r.color(),last:n.getTime(),data:s,session:i,keptSessions:a}),this.records.length>this.maxItems&&(this.records=this.records.slice(this.records.length-this.maxItems,this.records.length)),this.store()}},{key:"store",value:function(){this.saver(this,this.export())}},{key:"del",value:function(e){for(var t in this.records)if(this.records[t].uname===e){this.records.splice(t,1);break}this.saver(this,this.records)}},{key:"clearSession",value:function(e){for(var t in this.records)if(this.records[t].uname===e){this.records[t].session=null,this.records[t].keptSessions=[];break}this.store()}},{key:"all",value:function(){var e=[];for(var t in this.records)e.push({uid:this.records[t].uname,title:this.records[t].title,type:this.records[t].type,color:this.records[t].color,last:new Date(this.records[t].last),data:this.records[t].data,session:this.records[t].session,keptSessions:this.records[t].keptSessions});return e}},{key:"export",value:function(){var e=[];for(var t in this.records)e.push({uname:this.records[t].uname,title:this.records[t].title,type:this.records[t].type,color:this.records[t].color,last:this.records[t].last,data:this.records[t].data,session:a(this.records[t].keptSessions,this.records[t].session),keptSessions:this.records[t].keptSessions});return e}},{key:"import",value:function(e){for(var t in e)this.indexOf(e[t].uname)>=0||this.records.push({uname:e[t].uname,title:e[t].title,type:e[t].type,color:e[t].color,last:e[t].last,data:e[t].data,session:a(e[t].keptSessions,e[t].session),keptSessions:e[t].keptSessions});this.store()}},{key:"search",value:function(e,t,n,r){var s=r>this.records.length?this.records.length:r,i=[];s<0&&(s=this.records.length);for(var a=0;a<this.records.length&&i.length<s;a++)this.records[a].type===e&&this.records[a].data&&o(this.records[a].data,t,n)&&i.push(this.records[a]);return i}}]),e}()},8065:(e,t,n)=>{"use strict";n.d(t,{re:()=>h,s8:()=>l});var r=n(6610),s=n(5991),i=n(484),a=n(5130),o={title:"",type:"",host:"",meta:{}};function u(e){var t={};for(var n in o)t[n]=o[n];for(var r in o){if((0,i.Z)(o[r])!==(0,i.Z)(e[r]))throw new a.Z('Expecting the data type of "'+r+'" is "'+(0,i.Z)(o[r])+'", given "'+(0,i.Z)(e[r])+'" instead');t[r]=e[r]}return function(e){for(var t in e.meta)if("string"!=typeof e.meta[t])throw new a.Z('The data type of meta field "'+t+'" was "'+(0,i.Z)(e.meta[t])+'" instead of expected "string"')}(t.meta),t}var c=function(){function e(t){(0,r.Z)(this,e),this.preset=u(t)}return(0,s.Z)(e,[{key:"title",value:function(){return this.preset.title}},{key:"type",value:function(){return this.preset.type}},{key:"host",value:function(){return this.preset.host}},{key:"meta",value:function(e){if("string"!=typeof this.preset.meta[e])throw new a.Z('Meta "'+e+'" was undefined');return this.preset.meta[e]}},{key:"metaDefault",value:function(e,t){try{return this.meta(e)}catch(e){return t}}},{key:"insertMeta",value:function(e,t){if(void 0!==this.preset.meta[e])throw new a.Z('Meta "'+e+'" has already been defined');this.preset.meta[e]=t}},{key:"metaKeys",value:function(){var e=[];for(var t in this.preset.meta)e.push(t);return e}}]),e}();function h(){return new c({title:"Default",type:"Default",host:"",meta:{}})}var l=function(){function e(t){(0,r.Z)(this,e),this.presets=[];for(var n=0;n<t.length;n++)this.presets.push(new c(t[n]))}return(0,s.Z)(e,[{key:"fetch",value:function(e){for(var t=[],n=0;n<this.presets.length;n++)this.presets[n].type()===e&&t.push(this.presets[n]);return t}},{key:"meta",value:function(e,t,n){for(var r=[],s=0;s<this.presets.length;s++)if(this.presets[s].type()===e){try{if(this.presets[s].meta(t)!==n)continue}catch(e){if(!(e instanceof a.Z))throw e;continue}r.push(this.presets[s])}return r}},{key:"hosts",value:function(e,t){for(var n=[],r=0;r<this.presets.length;r++)this.presets[r].type()===e&&this.presets[r].host()===t&&n.push(this.presets[r]);return n}}]),e}()},456:(e,t,n)=>{"use strict";n.r(t),n.d(t,{hmac512:()=>a,GCMNonceSize:()=>u,GCMKeyBitLen:()=>c,buildGCMKey:()=>h,encryptGCM:()=>l,decryptGCM:()=>d,generateNonce:()=>f,increaseNonce:()=>p});var r=n(2137),s=n(7757),i=n.n(s);function a(e,t){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-512"}},!1,["sign","verify"]);case 2:return r=e.sent,e.abrupt("return",window.crypto.subtle.sign(r.algorithm,r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=12,c=128;function h(e){return window.crypto.subtle.importKey("raw",e,{name:"AES-GCM",length:c},!1,["encrypt","decrypt"])}function l(e,t,n){return window.crypto.subtle.encrypt({name:"AES-GCM",iv:t,tagLength:c},e,n)}function d(e,t,n){return window.crypto.subtle.decrypt({name:"AES-GCM",iv:t,tagLength:c},e,n)}function f(){return window.crypto.getRandomValues(new Uint8Array(u))}function p(e){for(var t=e.length;t>0&&(e[t-1]++,e[t-1]<=0);t--);return e}},4003:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(6610),s=n(5991),i=function(){function e(t){(0,r.Z)(this,e),this.data=t}return(0,s.Z)(e,[{key:"update",value:function(e){this.data.shift(),this.data.push({data:e,class:""})}},{key:"expire",value:function(){for(var e=0;e<this.data.length;e++)this.data[e].class="expired"}},{key:"get",value:function(){return this.data}}]),e}()},5832:()=>{}}]);
//# sourceMappingURL=e48591a2f73d1126a6ee.js.map